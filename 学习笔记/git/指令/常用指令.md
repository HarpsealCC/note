# **常用指令**

本文介绍在使用git中常用的一些指令

## 初始化与仓库相关

* 安装

指令：
```
sudo apt-get install git
```

* 在当前目录创建git仓库
```
git init
```

* 克隆仓库

指令：
```
git clone <url>
```
其中url为远程连接，可以是http或者git，在github上的路径上能获取
```
e.g.
git clone git@github.com:apache/impala.git
```

## 分支相关

* 创建分支

**方法1：**
指令：
```
git branch <branch-name>
```
其中branch-name表示分支名称，此指令表示从当前分支创建一个名为branch-name的子分支，这个方法只能创建分支，还得使用
```
git checkout <branch-name>
```
切过去

**方法2：**
指令：
```
git checkout -b <branch-name>
```
其中branch-name表示分支名称，此指令可以在从当前分支创建子分支branch-name后切过去，比方法1方便一些
```
e.g.
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch
* master
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git checkout -b ms
Switched to a new branch 'ms'
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch
  master
* ms
```
* 创建追踪分支

方法1：
```
git checkout --track [remote-name]/[branch-name]
```
这条命令的作用是在本地创建一个和远程分支同名的分支，并将两者关联起来。remote-name一般叫origin，branch-name代表远程分支。

```
e.g.
$ git branch -a
* master
  remotes/origin/develop
  remotes/origin/master
$ git checkout --track origin/develop
Switched to a new branch 'develop'
Branch develop set up to track remote branch develop from origin.
$ git branch -vv
* develop d66b942 [origin/develop] add a new file b.txt
  master  d66b942 [origin/master: ahead 1] add a new file b.txt

```
方法2：
```
git checkout -b [remotename]/[branch]
```


* 查看分支信息

指令：
```
git branch
```
查看当前工作区下的所有分支，用星号标注出当前分支
```
e.g.
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch
  master
* ms
```
<br>
指令：
```
git branch -a
```
查看仓库中所有的分支，远程分支有remote字样（一般字体颜色也不一样），其他为本地分支
```
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch -a
  master
* ms
  remotes/origin/master   // 远程分支的追踪分支，字符颜色也不一样
```
<br>
指令：
```
git branch -v & git branch -vv
```
查看分支的信息，-vv 可以查看设置的所有追踪分支[^注1]，同时还会列出每一个本地分支是否是领先、落后跟踪分支或是都有[]中表示的是跟踪分支，ahead与behind代表与远端分支相比领先与落后多少次提交

[^注1]:*追踪分支：可以理解为本地与远端分支的关联，有时候本地分支没有追踪到远端分支然后push就会报找不到上游分支，可以使用push origin 或者添加追踪分支*

* 删除分支

指令：
```
# 删除本地分支
git branch -d <branch-name> 
# 强行删除本地分支
git branch -D <branch-name> 
```
删除本地分支branch-name，不能在被删除的分支上进行操作。(可能是为了保证至少有一个分支还在)
-d是–delete的缩写,在使用–delete删除分支时,该分支必须完全和它的上游分支[^注2]merge完成,如果没有上游分支,必须要和HEAD完全merge
-D是–delete --force的缩写,这样写可以在不检查merge状态的情况下删除分支
--force简写-f,作用是将当前branch重置到初始点(startpoint),如果不使用–force的话,git分支无法修改一个已经存在的分支
[^注2]:*上游分支：可以认为是跟踪分支所要跟踪的对象*
```
e.g.
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch
* master
  ms
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch -d ms
Deleted branch ms (was eaa494a).
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ git branch
* master
harpseal@ecs-234016:~/github/harpseal/学习笔记/formwork$ 
```
指令：

```
# 删除远程分支
git push origin --delete <branch-name>
```
会同时删除远程分支与追踪分支


* 对追踪分支和上游分支进行操作



## 其他

* 查看版本
```
git --version
```

* 查看帮助
```
git <cmd> -h
```